//================================================================================================//项目名称 ：    基盘//功    能 ：   Action//文件名称 ：    BaseAction.java                                   //描    述 ：    所有Action都需要继承//================================================================================================//修改履历                                                                //年 月 日		区分		所 属/担 当           		内 容									标识        //----------   	----   	------------------- ---------------                          ------        //2009/04/28   	编写   	Intasect/余海涛		新規作成//2009/05/19   	修改   	Intasect/殷翔    	 	添加日志和异常处理           //================================================================================================package sysSrc.framework;import java.util.Locale;import javax.servlet.http.HttpServletRequest;import javax.servlet.http.HttpServletResponse;import org.apache.struts.Globals;import org.apache.struts.action.ActionForm;import org.apache.struts.action.ActionForward;import org.apache.struts.action.ActionMapping;import baseSrc.framework.BaseAction;import baseSrc.framework.BaseActionForm;import baseSrc.framework.BaseConstants;import sysSrc.common.changeLanguage.FunTopForm;public class SysBaseAction extends BaseAction{		private static final long serialVersionUID = 1L;		public ActionForward expandSysEndEvent(ActionMapping mapping, ActionForm form,			HttpServletRequest request, HttpServletResponse response){		return null;	}		public ActionForward expandSysStartEvent(ActionMapping mapping, ActionForm form,			HttpServletRequest request, HttpServletResponse response){				ActionForward actionForward = null;				// 取得Form		BaseActionForm usrForm = (BaseActionForm) form;						// 取得actionMethodId		String actionMethodId = super.getActionMethodId(usrForm);				//如果为top页面提交的请求，并且请求内容为更换语言		if(usrForm instanceof FunTopForm && actionMethodId.equals("runChangeLanguage")){			FunTopForm funTopForm = (FunTopForm) form;				String languageName = funTopForm.getLanguageName();			if(languageName.equals("zh")){				//Locale cnLocale = new Locale( "CHINESE", "CHINA" ); 				request.getSession().setAttribute(Globals.LOCALE_KEY, Locale.CHINA);			}			if(languageName.equals("ja")){				//Locale jpLocale = new Locale( "JAPANESE", "JAPAN" ); 				request.getSession().setAttribute(Globals.LOCALE_KEY, Locale.JAPAN);			}		}		//如果为top页面提交的请求，并且请求内容为退出登录		if(usrForm instanceof FunTopForm && actionMethodId.equals("runLogOut")){			//删除session中的用户信息			request.getSession().removeAttribute(BaseConstants.ISC_BASE_BEANCOM_ID);			//重新返回登录画面			actionForward = mapping.findForward("loginGo");			return actionForward;		}		return actionForward;	}}